select Contract.safebox_id
    from Contract, expiration
    where cast(CURRENT_TIMESTAMP as date) > DATE_ADD(contract.time, INTERVAL contract.time_plan_duration MONTH) and
    contract.safebox_id not in (select expiration.safebox_id from expiration where expiration.safebox_id=contract.safebox_id and expiration.contract_time=contract.time);


select employee.salary
from employee, hall
where employee.is_responsible = 1 and
employee.national_id = hall.employee_national_id and
hall.security_level >= 3 and
hall.security_level <= 5
ORDER BY RAND();



select (Safebox.price_class * 100) - (select TimePlan.discount from TimePlan where TimePlan.duration = 3)
from Safebox, Hall
where Safebox.hall_floor = Hall.floor and
Hall.security_level = 2;

